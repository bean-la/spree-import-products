<h2>Import Products from CSV</h2>
<br>
<%= form_for([:admin, @product_import], :method => :post, :data=> { :turbo => false}, :html => { :multipart => true }) do |f| %>
   <fieldset>
   <%= f.field_container :data_file do %>
      <%= f.file_field :data_file, accept: 'text/csv' %>
   <% end %>
   </fieldset>

   <div data-hook="buttons" class="form-actions">
      <%= button "Import", 'ok', 'submit', {class: 'btn-success'} %>
   </div>
<% end %>

<br>
<h2>Product Imports Details:</h2>
<br>
<% if @product_imports.empty? %>
  <div class="alert alert-info no-objects-found">No Product Imports found.</div>
<% else %>
  <table>
    <thead>
      <th>File name</th>
      <th>Created at</th>
      <th>Imported by</th>
      <th>Status</th>
      <th>Errors</th>
    </thead>
    <tbody>
      <% @product_imports.each do |import| %>
        <tr>
          <td><%= import.file_name %></td>
          <td><%= import.created_at.strftime("%d/%m/%Y %H:%M") %></td>
          <td><%= import.user.email %></td>
          <td><%= import.status %></td>
          <td><%= import.import_errors %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<style>
  table, th, td {
    border: 1px solid black;
    padding: 8px;
  }
</style>